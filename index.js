(()=>{"use strict";var e={5:function(e,t,r){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.OpenRouterService=void 0;const o=i(r(82)),s=r(602),a=r(628);t.OpenRouterService=class{constructor(){this.client=new o.default({baseURL:"https://openrouter.ai/api/v1",apiKey:s.settings.openrouter.apiKey})}async generateCompletion(e){try{const t=await this.client.chat.completions.create({model:s.settings.openrouter.model||"openai/gpt-4o",messages:[{role:"user",content:e}],max_tokens:s.settings.openrouter.maxTokens||1e3,temperature:s.settings.openrouter.temperature||.7});return t.choices[0].message?.content||""}catch(e){throw e instanceof Error?a.logger.error("OpenRouter API error:",e):a.logger.error("OpenRouter API error:","No Standard Error"),e}}}},12:function(e,t,r){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserService=void 0;const o=i(r(896)),s=i(r(928)),a=i(r(857)),n=i(r(758)),l=r(602),c=r(628);t.BrowserService=class{constructor(){this.browser=null,this.page=null}async initialize(e=l.settings.browser){try{if(c.logger.info("Just initializing the browser"),this.browser=await n.default.launch(e),this.page=await this.createNewPage(),!this.page)throw new Error("Failed to create a new page");await this.page.setViewport(e.defaultViewport)}catch(e){e instanceof Error?await c.logger.error("Browser initialization failed",e):await c.logger.error("Browser initialization failed:","No Standard Error")}}async getPage(){return this.page?this.page:(await c.logger.error("Browser page requested before initialization","Page is not initialized"),null)}async createNewPage(){if(!this.browser)return await c.logger.error("New page creation failed","Browser is not initialized"),null;try{const e=await this.browser.newPage();return await e.setViewport(l.settings.browser.defaultViewport),e}catch(e){return e instanceof Error?await c.logger.error("New page creation failed",e):await c.logger.error("New page creation failed:","No Standard Error"),null}}async close(){try{this.browser&&(await this.browser.close(),await this.cleanupOldTempDirectories(),this.browser=null,this.page=null)}catch(e){c.logger.error("Failed to close browser:",e)}}async cleanupOldTempDirectories(){try{const e=a.default.tmpdir();c.logger.log(`tempDir: ${e}`);const t=o.default.readdirSync(e).filter((e=>e.startsWith("puppeteer_dev_chrome_profile-"))).map((t=>s.default.join(e,t))),r=Date.now()-216e5;await Promise.all(t.map((async e=>{try{o.default.statSync(e).mtime.getTime()<r&&(o.default.rmSync(e,{recursive:!0,force:!0}),c.logger.info(`Cleaned up old Puppeteer directory: ${e}`))}catch(t){await c.logger.error(`Failed to remove directory ${e}`,t instanceof Error?t:"No Standard Error")}})))}catch(e){await c.logger.error("Temp Dirs Cleanup failed",e instanceof Error?e:"No Standard Error")}}async screenshot(e){if(this.page)try{await this.page.screenshot({path:e})}catch(e){e instanceof Error?await c.logger.error("Screenshot failed",e,this.page):await c.logger.error("Screenshot failed:","No Standard Error",this.page)}else await c.logger.error("Screenshot failed","Page is not initialized")}async waitForSelector(e,t){const r=await this.getPage();if(!r)return!1;try{return await r.waitForSelector(e,{timeout:t,visible:!0}),!0}catch(t){return t instanceof Error?t.name&&"TimeoutError"!==t.name&&await c.logger.error(`Selector wait failed: ${e}`,t,r):await c.logger.error(`Selector wait failed: ${e}`,"No Standard Error",r),!1}}async goto(e,t){let r=null;if(r=t||await this.getPage(),!r)return!1;try{return await r.goto(e,{waitUntil:"domcontentloaded",timeout:3e4}),!0}catch(t){return t instanceof Error?await c.logger.error(`Navigation failed: ${e}`,t,r):await c.logger.error(`Navigation failed: ${e}`,"No Standard Error",r),!1}}async isElementExists(e,t,r=3e3){try{return await e.waitForSelector(t,{timeout:r,visible:!0}),!0}catch(e){return!1}}}},64:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validateBidRequest=t.validateBidAmount=void 0;const i=r(870);t.validateBidAmount=(e,t)=>!(e<i.MIN_PROJECT_BUDGET||e>i.MAX_PROJECT_BUDGET||e<.9*t.minimum||e>1.1*t.maximum),t.validateBidRequest=e=>!(!(e.projectId&&e.amount&&e.proposal)||e.deliveryTime<1||e.deliveryTime>90||e.proposal.length<100||e.proposal.length>5e3)},82:e=>{e.exports=require("openai")},270:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AuthController=void 0;const i=r(628);t.AuthController=class{constructor(e){this.freelancerService=e}async login(){try{return i.logger.info("Just logging into the account"),await this.freelancerService.isLoggedIn()?(i.logger.info("Already logged in"),!0):await this.freelancerService.login()?(i.logger.info("Login successful"),!0):(i.logger.info("Login failed"),!1)}catch(e){return e instanceof Error&&i.logger.error("Auth error:",e),i.logger.error("Auth error:","No Standard Error"),!1}}async validateSession(){return this.freelancerService.isLoggedIn()}async logout(){await this.freelancerService.logout(),i.logger.info("Logged out successfully")}}},579:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BidController=void 0;const i=r(628),o=r(64);t.BidController=class{constructor(e,t){this.freelancerService=e,this.proposalService=t,this.bidHistory=new Map}async placeBid(e){try{const t=await this.proposalService.generateProposal(e);if(!(0,o.validateBidAmount)(t.suggestedBid,e.budget))return i.logger.error("Invalid bid amount for project:",e.id),!1;const r={projectId:e.id,projectUrl:e.url,amount:t.suggestedBid,deliveryTime:t.estimatedDuration,proposal:t.proposal},s=await this.freelancerService.submitBid(r);return s.success?(this.bidHistory.set(e.id,new Date),i.logger.info(`Bid placed successfully for project ${e.id}`),!0):(i.logger.error(`Bid failed for project ${e.id}:`,s.error),!1)}catch(e){return e instanceof Error?i.logger.error("Bid placement error:",e):i.logger.error("Bid placement error:","No Standard Error"),!1}}async canBidOnProject(e){const t=this.bidHistory.get(e);return!t||Date.now()-t.getTime()>=864e5}getBidHistory(){return new Map(this.bidHistory)}}},585:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.customizeTemplate=t.getProposalTemplate=void 0;const r={fixed:"Dear,\n  \nI've reviewed your [Project Title] and I'm excited to help you bring this project to life. Based on your requirements, I understand you need [Brief Project Summary].\n\nMy relevant experience includes:\n- [Skill Experience 1]\n- [Skill Experience 2]\n- [Skill Experience 3]\n\nProject Approach:\n1. Initial consultation and requirements clarification\n2. [Milestone 1 with specific deliverable]\n3. [Milestone 2 with specific deliverable]\n4. Final delivery with testing and revisions\n\nI can complete this project within [Duration] days for a fixed price of $[Bid Amount]. This includes:\n- [Deliverable 1]\n- [Deliverable 2]\n- [Deliverable 3]\n- 2 rounds of revisions\n\nI'm available to start immediately and will provide regular updates throughout the project lifecycle.\n\nWould you be available for a quick call to discuss the project in more detail?\n\nBest regards,\nMakhdoom Abubakar Bakhtiar",hourly:"Dear,\n  \nThank you for posting your [Project Title] project. After reviewing your requirements, I believe my expertise in [Key Skills] makes me an ideal candidate.\n\nHere's my understanding of your needs: [Brief Project Summary]\n\nWhy I'm the right fit:\n- [X] years of experience with [Relevant Technology/Skill]\n- Successfully completed [X] similar projects (examples available on request)\n- Available [X] hours per day in your timezone for seamless communication\n\nFor this project, I estimate:\n- [X] hours per week at $[Hourly Rate]/hour\n- Total approximate duration: [Duration] weeks\n\nMy workflow includes daily updates, regular demos, and adapting to feedback quickly. I'm committed to delivering high-quality work that exceeds your expectations.\n\nI'd love to discuss your project goals in more detail. When would be a good time for a brief call?\n\nLooking forward to your response,\nMakhdoom Abubakar Bakhtiar"};t.getProposalTemplate=e=>r[e]||r.fixed,t.customizeTemplate=(e,t)=>{let r=e;for(const[e,i]of Object.entries(t))r=r.replace(new RegExp(`\\[${e}\\]`,"g"),i);return r}},594:function(e,t,r){var i,o=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,o)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||(i=function(e){return i=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},i(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=i(e),a=0;a<r.length;a++)"default"!==r[a]&&o(t,e,r[a]);return s(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.DbService=void 0;const n=a(r(689)),l=r(628);t.DbService=class{constructor(){this.db=new n.Database("data/projects.db",(e=>{e&&l.logger.error("Database connection error:",e)})),this.initTables()}initTables(){this.db.run("\n            CREATE TABLE IF NOT EXISTS projects (\n                id TEXT PRIMARY KEY,\n                title TEXT,\n                description TEXT,\n                type TEXT,\n                budget_min REAL,\n                budget_max REAL,\n                currency TEXT,\n                skills TEXT,\n                skill_match_percent TEXT,\n                bid_count INTEGER,\n                average_bid REAL,\n                is_proposal_submitted BOOLEAN DEFAULT 0,\n                proposal_submitted_at DATETIME,\n                url TEXT,\n                has_red_flags BOOLEAN,\n                red_flags TEXT,\n                status TEXT,\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n                updated_at DATETIME\n            )\n        ")}async saveProject(e,t){l.logger.info("DATA:::",{project:e,redFlags:t});const r=this.db.prepare("\n            INSERT OR REPLACE INTO projects (\n                id, title, description, type,\n                budget_min, budget_max, currency,\n                skills, bid_count, average_bid, url,\n                has_red_flags, red_flags, skill_match_percent,\n                is_proposal_submitted, proposal_submitted_at, status\n            ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\n        ");r.run(e.id,e.title,e.description,e.type,e.budget.minimum,e.budget.maximum,e.currency,JSON.stringify(e.skills),e.bidCount,e.averageBid,e.url,t.hasRedFlags,JSON.stringify(t.flags),e.skillMatchPercent,e.isProposalSubmitted??!1,e.proposalSubmittedAt??null,e.status??"open"),r.finalize()}async getProjectByTitle(e){return new Promise(((t,r)=>{this.db.get("SELECT * FROM projects WHERE title = ?",[e],((e,i)=>{if(e)r(e);else{const e=i||null;l.logger.info("getProjectByTitle ::: Found project:",e?{title:e.title,id:e.id,url:e.url}:null),t(e)}}))}))}async getProjectById(e){return l.logger.info("getProjectById:::",{projectId:e}),new Promise(((t,r)=>{this.db.get("SELECT * FROM projects WHERE id = ?",[e],((e,i)=>{e?r(e):t(i||null)}))}))}close(){this.db.close()}}},602:function(e,t,r){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.settings=void 0;const o=i(r(896)),s=i(r(928));function a(e){return"true"===e||"false"!==e&&(isNaN(Number(e))?e:Number(e))}i(r(818)).default.config();const n=function(){try{const e=s.default.resolve("./data/user-pref.local.json"),t=o.default.readFileSync(e,"utf-8"),r=JSON.parse(t),i={};for(const[e,t]of Object.entries(r)){const r=e.split(".");let o=i;for(let e=0;e<r.length;e++){const i=r[e];e===r.length-1?o[i]=a(t):(o[i]||(o[i]={}),o=o[i])}}return i}catch(e){return console.warn("[settings] Failed to load user-pref.local.json:",e),{}}}();t.settings={openai:{apiKey:process.env.OPENAI_API_KEY,model:"gpt-3.5-turbo",maxTokens:500,temperature:.7},openrouter:{apiKey:process.env.OPENROUTER_API_KEY||"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",model:process.env.OPENROUTER_MODEL||"openai/gpt-4o",maxTokens:Number(process.env.OPENROUTER_MAX_TOKENS||"1000"),temperature:Number(process.env.OPENROUTER_TEMPERATURE||"0.7")},browser:{headless:Boolean(n.browser?.headless??!0),args:["--no-sandbox","--disable-setuid-sandbox","--disable-dev-shm-usage","--disable-extensions"],defaultViewport:{width:1920,height:1080}},freelancer:{username:n.freelancer?.username||process.env.FREELANCER_USERNAME,password:n.freelancer?.password||process.env.FREELANCER_PASSWORD,bidDelayMs:n.freelancer?.bidDelayMs??parseInt(process.env.BID_DELAY_MS||"5000"),maxDailyBids:n.freelancer?.maxDailyBids??parseInt(process.env.MAX_DAILY_BIDS||"20"),search_keywords:n.search?.keywords?.split(",").map((e=>e.trim()))||["HTML","JS","CSS","JavaScript","java script","node","node js","Node.js","react","react js","React.js","typescript","Typescript","next","next js","Next.js","tailwind css","Tailwind CSS"],search:{searchPhrase:n.search?.searchPhrase||process.env.SEARCH_PHRASE,projectPostedTime:{value:n.search?.projectPostedTime?.value??60,unit:n.search?.projectPostedTime?.unit??"minutes"},projectSkillsNumList:n.search?.projectSkillsNumList||"projectSkills=500,759,979,2376,2435",matchFromProjectSkills:n.search?.matchFromProjectSkills??"true"===process.env.MATCH_FROM_PROJECT_SKILLS,skillMatchPercent:n.search?.skillMatchPercent??parseInt(process.env.SKILL_MATCH_PERCENT||"65"),maxPagesToCheck:n.search?.maxPagesToCheck??parseInt(process.env.MAX_PAGES_TO_CHECK||"1"),projectsPerSearch:n.search?.projectsPerSearch??parseInt(process.env.PROJECTS_PER_SEARCH||"1"),minClientRating:n.search?.minClientRating??parseFloat(process.env.MIN_CLIENT_RATING||"1.5"),minClientReviews:n.search?.minClientReviews??parseInt(process.env.MIN_CLIENT_REVIEWS||"2"),maxBidCount:n.search?.maxBidCount??parseInt(process.env.MAX_BID_COUNT||"100"),pageLoadTimeout:n.search?.pageLoadTimeout??parseInt(process.env.PAGE_LOAD_TIMEOUT||"50000"),searchPageRefreshTime:n.search?.pageRefreshTime??parseInt(process.env.SEARCH_PAGE_REFRESH_TIME||"10000"),pageDelay:n.search?.pageDelay??parseInt(process.env.PAGE_DELAY||"5000"),budget:{setBudget:n.search?.budget?.setBudget??!0,hourlyMin:Number(n.search?.budget?.hourlyMin||"0"),hourlyMax:Number(n.search?.budget?.hourlyMax||"10000"),fixedMin:Number(n.search?.budget?.fixedMin||"0"),fixedMax:Number(n.search?.budget?.fixedMax||"10000")},projectType:n.search?.projectType||process.env.PROJECT_TYPE||"",ignoreProjectByCurrencies:n.search?.ignoreProjectByCurrencies?.split(",").map((e=>e.trim().toUpperCase()))||[]}},logging:{level:process.env.LOG_LEVEL||"info",file:process.env.LOG_FILE||"app.log"}}},628:function(e,t,r){var i,o=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,o)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||(i=function(e){return i=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},i(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=i(e),a=0;a<r.length;a++)"default"!==r[a]&&o(t,e,r[a]);return s(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.logger=void 0;const n=a(r(896)),l=a(r(928)),c=r(771);t.logger=new class{constructor(){this.logDir="logs",this.screenshotDir="misc/screenshots",[this.logDir,this.screenshotDir].forEach((e=>{n.existsSync(e)||n.mkdirSync(e,{recursive:!0})}))}generateErrorId(){return(new Date).toISOString().replace(/[:.]/g,"-")}async error(e,t,r){const i=this.generateErrorId(),o={errorId:i,message:e,error:t?.message||t,timestamp:(0,c.getLogTimestamp)(),stack:t?.stack,url:await(r?.url())};if(r){const e=l.join(this.screenshotDir,`${i}.png`);try{await r.screenshot({path:e,fullPage:!0}),o.screenshot=e}catch(e){e instanceof Error?o.error=`${o.error}. Screenshot failed: ${e.message}`:o.error=`${o.error}. Screenshot failed: 'No Standard Error`}}return n.appendFileSync(l.join(this.logDir,"error.log"),JSON.stringify(o,null,2)+"\n"),console.error("[31m%s[0m",JSON.stringify(o,null,2)),o}info(e,t){const r={timestamp:(0,c.getLogTimestamp)(),level:"INFO",message:e,data:t};n.appendFileSync(l.join(this.logDir,"app.log"),JSON.stringify(r)+"\n"),console.log("[36m%s[0m",JSON.stringify(r))}log(e){const t=`{"${(0,c.getLogTimestamp)().split("T")[1].split("Z")[0]}","log","message":"${e}"}`;n.appendFileSync(l.join(this.logDir,"logs.log"),JSON.stringify(t)+"\n"),console.log("[36m%s[0m",JSON.stringify(t))}}},689:e=>{e.exports=require("sqlite3")},693:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.showProjectModal=async function(e,t,r){await e.evaluate((({projectId:e,options:t})=>{const r=document.createElement("div");r.style.position="fixed",r.style.top="50%",r.style.left="50%",r.style.transform="translate(-50%, -50%)",r.style.backgroundColor="#ffeeee",r.style.padding="20px",r.style.border="2px solid #ff5555",r.style.borderRadius="5px",r.style.zIndex="10000",r.style.boxShadow="0 0 10px rgba(0,0,0,0.5)";const i=document.createElement("h3");i.textContent=t.title,i.style.color="#cc0000",i.style.marginTop="0",r.appendChild(i);const o=document.createElement("p");o.textContent=`Project ID: ${e}`,r.appendChild(o),t.message.forEach((e=>{const t=document.createElement("p");t.textContent=e,r.appendChild(t)}));const s=document.createElement("button");s.textContent="Close",s.style.padding="5px 10px",s.style.marginTop="10px",s.style.cursor="pointer",s.onclick=()=>r.remove(),r.appendChild(s),document.body.appendChild(r),t.autoCloseTime&&setTimeout((()=>{document.body.contains(r)&&r.remove()}),t.autoCloseTime)}),{projectId:t,options:r}),r.showDuration&&await new Promise((e=>setTimeout(e,r.showDuration)))}},758:e=>{e.exports=require("puppeteer")},771:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.extractSkills=t.calculateBidAmount=t.parseProjectBudgetWithRegex=t.parseProjectBudget=t.formatCurrency=t.sleep=void 0,t.getLogTimestamp=function(){const e=new Date;return`[${e.toLocaleString(void 0,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1,timeZoneName:"short"})}] (UTC: ${e.toISOString()})`},t.parseRelativeTime=function(e){const t=new Date,r=e.match(/(\d+)\s+(minutes?|hours?|days?)\s+ago/i);if(!r)return null;const i=parseInt(r[1]);switch(r[2]){case"minute":case"minutes":return new Date(t.getTime()-60*i*1e3);case"hour":case"hours":return new Date(t.getTime()-60*i*60*1e3);case"day":case"days":return new Date(t.getTime()-24*i*60*60*1e3);default:return null}},r(818).config(),t.sleep=e=>new Promise((t=>setTimeout(t,e))),t.formatCurrency=(e,t="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e),t.parseProjectBudget=e=>{const t=e.match(/\d+/g)?.map(Number)||[];return{minimum:Math.min(...t),maximum:Math.max(...t)}},t.parseProjectBudgetWithRegex=e=>{if(!e)return{minimum:0,maximum:0};const t=e.replace(/<[^>]*>/g,"").trim().match(/(?:([‚Çπ$‚Ç¨¬£¬•])?\s*([0-9,.]+)(?:\.00)?\s*‚Äì\s*([0-9,.]+)(?:\.00)?\s*([A-Z]{3})?)|(?:([A-Z]{3})?\s*([0-9,.]+)(?:\.00)?\s*‚Äì\s*([0-9,.]+)(?:\.00)?)/);if(t){if(t[1]||t[4]){const e=t[2].replace(/,/g,""),r=t[3].replace(/,/g,"");return{minimum:parseFloat(e),maximum:parseFloat(r),currency:t[4]&&t[1]?`${t[4]} - ${t[1]}`:t[4]||t[1]}}if(t[5]){const e=t[6].replace(/,/g,""),r=t[7].replace(/,/g,"");return{minimum:parseFloat(e),maximum:parseFloat(r),currency:t[5]}}}return{minimum:0,maximum:0}},t.calculateBidAmount=(e,t,r)=>{if(0===r)return(t.minimum+t.maximum)/2;const i=Math.min(.9*e,t.maximum);return Math.max(i,t.minimum)},t.extractSkills=(e,t)=>t.filter((t=>e.toLowerCase().includes(t.toLowerCase())))},774:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BasePlatformService=void 0,t.BasePlatformService=class{constructor(e,t,r){this.browser=e,this.platform=t,this.selectors=r}}},775:function(e,t,r){var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,o)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(693),t)},804:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.typeHuman=async function(e,t,i){await e.focus(t);for(let o=0;o<i.length;o++){if(await r(200*Math.random()+100),Math.random()<.05){const s=i[o].replace(/[a-z]/i,(e=>String.fromCharCode(e.charCodeAt(0)+(Math.random()>.5?1:-1))));await e.type(t,s),await r(500),await e.keyboard.press("Backspace"),await r(200)}await e.type(t,i[o])}Math.random()<.2&&await r(1e3)},t.typeHumanNumber=async function(e,t,i){await e.focus(t),await e.click(t,{clickCount:3}),await r(150*Math.random()+100),await e.type(t,String(i)),Math.random()<.2&&await r(500)};const r=e=>new Promise((t=>setTimeout(t,e)))},818:e=>{e.exports=require("dotenv")},857:e=>{e.exports=require("os")},859:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const i=r(12),o=r(937),s=r(5),a=r(910),n=r(270),l=r(579),c=r(958),d=r(628),u=r(771),p=r(602);t.App=class{constructor(e="freelancer"){this.isRunning=!1,this.browserService=new i.BrowserService,this.platformService=new o.FreelancerService(this.browserService),this.openRouterService=new s.OpenRouterService,this.proposalService=new a.ProposalService(this.openRouterService),this.authController=new n.AuthController(this.platformService),this.bidController=new l.BidController(this.platformService,this.proposalService),this.proposalController=new c.ProposalController(this.proposalService)}async initialize(e){try{d.logger.info("Just initializing the app");do{if(await this.browserService.initialize(),await this.authController.login())return!0;await this.browserService.close(),0==--e&&await d.logger.error("Login attempt failed",`Attempt ${e}`)}while(e>0);return!0}catch(e){return e instanceof Error&&d.logger.error("Initialization failed:",e),d.logger.error("Initialization failed:","No Standard Error"),!1}}async start(e=[],t=[],r=3){try{if(!await this.initialize(r))return void await d.logger.error("Application start failed","Initialization unsuccessful");this.isRunning=!0,await this.monitorProjects(e,t)}catch(e){e instanceof Error&&d.logger.error("Application error:",e),d.logger.error("Application error:","No Standard Error"),await this.stop()}}async stop(){this.isRunning=!1,await this.authController.logout(),await this.browserService.close()}async monitorProjects(e,t=[]){for(d.logger.info("Just starting monitorProjects");this.isRunning;)try{const t=await this.platformService.searchProjects(e);if(Array.isArray(t)){for(const r of t)if(await this.bidController.canBidOnProject(r.id)){const t=await this.platformService.getProjectDetails(r.url,e);if(!t)continue;if("noOfBids"in t){d.logger.info("RemainingBids type detected. Skipping this project.");break}if(!t)continue;await this.bidController.placeBid(t)}}else{if(404===t.code){await(0,u.sleep)(3e4);continue}if(409===t.code){await(0,u.sleep)(5e3);continue}}const r=this.platformService.getSelectors(),i=`${r.urls.search}?keyword=${e.join("+")}`;if(!await this.browserService.goto(i)){d.logger.info(`Navigation failed for page: ${r.urls.search}?keyword=${e.join("+")}`);break}const o=await this.browserService.getPage();if(o)try{const e=o.waitForSelector(r.search.results.newProjectsButton,{timeout:p.settings.freelancer.search.searchPageRefreshTime||12e4});await e,await o.click(r.search.results.newProjectsButton),await(0,u.sleep)(200)}catch(e){d.logger.info("No new projects notification, refreshing page")}}catch(e){e instanceof Error&&await d.logger.error("Project monitoring error",e),d.logger.error("Project monitoring error:","No Standard Error"),await(0,u.sleep)(3e5)}}}},870:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_PROJECT_BUDGET=t.MIN_PROJECT_BUDGET=t.PROJECT_TYPES=t.DEFAULT_TIMEOUT=t.MAX_CONCURRENT_BIDS=t.BID_COOLDOWN=t.SEARCH_URL=t.LOGIN_URL=t.FREELANCER_URL=void 0,t.FREELANCER_URL="https://www.freelancer.com",t.LOGIN_URL=`${t.FREELANCER_URL}/login`,t.SEARCH_URL=`${t.FREELANCER_URL}/search/projects`,t.BID_COOLDOWN=3e5,t.MAX_CONCURRENT_BIDS=3,t.DEFAULT_TIMEOUT=3e4,t.PROJECT_TYPES=["fixed","hourly"],t.MIN_PROJECT_BUDGET=50,t.MAX_PROJECT_BUDGET=5e3},896:e=>{e.exports=require("fs")},910:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProposalService=void 0;const i=r(585),o=r(628);t.ProposalService=class{constructor(e){this.llmService=e}async generateProposal(e){o.logger.info("proposal.service: Generating proposal...");try{const t=this.getTemplateProposal(e.type),r={projectTitle:e.title,projectDescription:e.description,skills:e.skills,budget:{min:e.budget.minimum,max:e.budget.maximum}},i=await this.customizeProposal(t,r);return o.logger.log(`Generated proposal: ${i}`),{proposal:i,suggestedBid:this.calculateSuggestedBid(e),estimatedDuration:this.estimateDuration(e)}}catch(e){throw e instanceof Error?o.logger.error("Proposal generation failed:",e):o.logger.error("Proposal generation failed:","No Standard Error"),e}}getTemplateProposal(e){return(0,i.getProposalTemplate)(e)}async customizeProposal(e,t){const r=`Write a concise, professional freelance proposal (max 1400 characters) based on:\n                    Template: ${e}\n                    Project Title: ${t.projectTitle}\n                    Description: ${t.projectDescription}\n                    Skills: ${t.skills.join(", ")}\n                    Budget: $${t.budget.min}-${t.budget.max}\n\n                    Instructions:\n                        - Tailor it to the project type.\n                        - Highlight only the most relevant skills and tools.\n                        - Suggest a reasonable timeline and budget-aligned pricing.\n                        - Avoid filler phrases and don't address the client by name.\n                        - Keep it clear, confident, and directly relevant to the job.`;return this.llmService.generateCompletion(r)}calculateSuggestedBid(e){return(e.budget.minimum+e.budget.maximum)/2}estimateDuration(e){if("fixed"===e.type){const t=(e.budget.minimum+e.budget.maximum)/2;return Math.max(3,Math.min(14,Math.round(t/150)))}return 7}}},928:e=>{e.exports=require("path")},937:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FreelancerService=void 0;const i=r(774),o=r(775),s=r(943),a=r(594),n=r(602),l=r(628),c=r(804),d=r(771),u=r(64);class p extends i.BasePlatformService{constructor(e){super(e,"freelancer",s.freelancerSelectors),this.isSearchPhraseEntered=!1,this.isProjectTypeAndBudgetsSet=!1,this.dbService=new a.DbService,this.browserSettings=n.settings.browser}getSelectors(){return this.selectors}async enterSearchPhrase(){const e=await this.browser.getPage();if(e)try{return await(0,c.typeHuman)(e,this.selectors.search.searchInput,n.settings.freelancer.search.searchPhrase),await e.click(this.selectors.search.searchButton),this.isSearchPhraseEntered=!0,this.isSearchPhraseEntered}catch(t){return t instanceof Error?await l.logger.error("Search phrase entry failed",t,e):await l.logger.error("Search phrase entry failed","No Standard Error",e),this.isSearchPhraseEntered=!1,this.isSearchPhraseEntered}else await l.logger.error("Search phrase entry failed","Search page not found")}async setProjectTypeAndBudgets(){const e=await this.browser.getPage();if(!e)return void await l.logger.error("Search phrase entry failed","Search page not found");const t=n.settings.freelancer.search;if("both"!=t.projectType){const r="fixed"===t.projectType?this.selectors.search.filters.projectTypeFixed:this.selectors.search.filters.projectTypeHourly;await e.waitForSelector(r),l.logger.log(`Waiting for project type selector: ${r}`),await e.$eval(r,(e=>e.checked))||(await(0,d.sleep)(500),await e.click(r)),"fixed"===t.projectType?(await(0,c.typeHumanNumber)(e,this.selectors.search.filters.fixedBudgetMin,n.settings.freelancer.search.budget.fixedMin),l.logger.log(` filter fixedMin is set to ${n.settings.freelancer.search.budget.fixedMin}`),await(0,d.sleep)(1e3),await(0,c.typeHumanNumber)(e,this.selectors.search.filters.fixedBudgetMax,n.settings.freelancer.search.budget.fixedMax),l.logger.log(` filter fixedMax is set to ${n.settings.freelancer.search.budget.fixedMax}`)):(await(0,c.typeHumanNumber)(e,this.selectors.search.filters.hourlyBudgetMin,n.settings.freelancer.search.budget.hourlyMin),l.logger.log(` filter hourlyMin is set to ${n.settings.freelancer.search.budget.hourlyMin}`),await(0,d.sleep)(1e3),await(0,c.typeHumanNumber)(e,this.selectors.search.filters.hourlyBudgetMax,n.settings.freelancer.search.budget.hourlyMax),l.logger.log(` filter hourlyMax is set to ${n.settings.freelancer.search.budget.hourlyMax}`)),l.logger.log(`Project type filter is set to ${t.projectType}`)}else l.logger.log(`Project type filter is set to ${t.projectType}`),await(0,c.typeHumanNumber)(e,this.selectors.search.filters.hourlyBudgetMin,n.settings.freelancer.search.budget.hourlyMin),l.logger.log(` filter hourlyMin is set to ${n.settings.freelancer.search.budget.hourlyMin}`),await(0,d.sleep)(100),await(0,c.typeHumanNumber)(e,this.selectors.search.filters.hourlyBudgetMax,n.settings.freelancer.search.budget.hourlyMax),l.logger.log(` filter hourlyMax is set to ${n.settings.freelancer.search.budget.hourlyMax}`),await(0,d.sleep)(100),await(0,c.typeHumanNumber)(e,this.selectors.search.filters.fixedBudgetMin,n.settings.freelancer.search.budget.fixedMin),l.logger.log(` filter fixedMin is set to ${n.settings.freelancer.search.budget.fixedMin}`),await(0,d.sleep)(100),await(0,c.typeHumanNumber)(e,this.selectors.search.filters.fixedBudgetMax,n.settings.freelancer.search.budget.fixedMax),l.logger.log(` filter fixedMax is set to ${n.settings.freelancer.search.budget.fixedMax}`),await(0,d.sleep)(100);this.isProjectTypeAndBudgetsSet=!0}async login(){const e=await this.browser.getPage();if(!e)return!1;try{return!!await this.browser.goto(this.selectors.urls.login)&&(await(0,c.typeHuman)(e,this.selectors.login.usernameInput,n.settings.freelancer.username),await(0,d.sleep)(this.selectors.waitTimes.short),await(0,c.typeHuman)(e,this.selectors.login.passwordInput,n.settings.freelancer.password),await e.click(this.selectors.login.submitButton),!!await this.browser.waitForSelector(this.selectors.login.loggedInIndicator,this.selectors.waitTimes.pageLoad)||(await this.browser.waitForSelector(this.selectors.login.errorMessage,2e3)&&await l.logger.error("Login failed","Invalid credentials or login blocked",e),!1))}catch(t){return t instanceof Error?await l.logger.error("Login process failed",t,e):await l.logger.error("Login process failed","No Standard Error",e),!1}}async searchProjects(e){const t=await this.browser.getPage();if(!t)return await l.logger.error("Project search failed 000","Search projects page not found"),{errMsg:"Search projects page not found",code:404};if(!t.url().includes(this.selectors.urls.search)&&(await l.logger.error("Project search failed 001","Search projects page URL mismatch"),!await this.browser.goto(this.selectors.urls.search)))return{errMsg:"Search projects page URL mismatch",code:409};const r=n.settings.freelancer.search,i=[];let o=1;await(0,d.sleep)(500),this.isSearchPhraseEntered||!r.searchPhrase||""===r.searchPhrase?l.logger.log("Search phrase already entered or empty, skipping entry"):this.isSearchPhraseEntered||(await(0,d.sleep)(2e3),await this.enterSearchPhrase()),!this.isProjectTypeAndBudgetsSet&&r.budget.setBudget&&await this.setProjectTypeAndBudgets(),await(0,d.sleep)(500);try{for(l.logger.log("inside searchProjects try fun");i.length<r.projectsPerSearch&&o<=r.maxPagesToCheck;){const s=`${this.selectors.urls.search}?keyword=${e.join("+")}&${r.projectSkillsNumList}&page=${o}`;if(!await this.browser.goto(s)){l.logger.info(`Navigation failed for page ${o}`);break}try{await t.waitForSelector(this.selectors.search.results.projectCard,{timeout:r.pageLoadTimeout})}catch(e){e instanceof Error?l.logger.info(`No more projects found on page ${o}: Error ${e}`):l.logger.info(`No more projects found on page ${o}: No Standard Error`);break}const a=await t.evaluate((({selectors:e,keywords:t,settings:r})=>{const i=document.querySelectorAll(e.search.results.projectCard),o=[];return i.forEach((i=>{const s=i.querySelectorAll(e.search.results.skillItem),a=[...new Set(Array.from(s).map((e=>e.textContent?.trim().toLowerCase()||"")))],n=i.querySelector(e.search.results.bidsCount),c=parseInt(n?.textContent?.replace(/\D/g,"")||"0"),d=i.querySelector(e.search.results.clientRating),u=i.querySelector(e.search.results.clientReviews),p=parseFloat(d?.textContent?.trim()||"0"),g=parseInt(u?.textContent?.replace(/\D/g,"")||"0"),h=t.map((e=>e.trim().toLowerCase())),m=a.filter((e=>h.includes(e))),f=r.matchFromProjectSkills?m.length/a.length*100:m.length/h.length*100,y=c<=r.maxBidCount&&p>=r.minClientRating&&g>=r.minClientReviews;let b=i.querySelector(e.search.filters.timePosted);b=b?.textContent?.trim();const w=r.projectPostedTime,v=i.querySelector(e.search.results.budget);let j=v?.textContent?.trim();j=(e=>{if(!e)return{minimum:0,maximum:0,type:"fixed"};const t=e.replace(/<[^>]*>/g,"").trim().toLowerCase(),r=t.match(/(?:(?<symbol>[‚Çπ$‚Ç¨¬£¬•])?\s*(?<min>[0-9,.]+)\s*‚Äì\s*(?<max>[0-9,.]+)\s*(?<code>[A-Z]{3})?)|(?:(?<codeAlt>[A-Z]{3})?\s*(?<minAlt>[0-9,.]+)\s*‚Äì\s*(?<maxAlt>[0-9,.]+))/);let i,o=0,s=0;return r?.groups&&(r.groups.min&&r.groups.max?(o=parseFloat(r.groups.min.replace(/,/g,"")),s=parseFloat(r.groups.max.replace(/,/g,"")),i=r.groups.code||r.groups.symbol):r.groups.minAlt&&r.groups.maxAlt&&(o=parseFloat(r.groups.minAlt.replace(/,/g,"")),s=parseFloat(r.groups.maxAlt.replace(/,/g,"")),i=r.groups.codeAlt)),{minimum:o,maximum:s,currency:i,type:t.includes("per hour")?"hourly":"fixed"}})(j||"");let S=((e,t)=>{const r=e.match(/(\d+)\s+(minutes?|hours?|days?)\s+ago/i);if(!r)return!1;const i={minute:1,minutes:1,hour:60,hours:60,day:1440,days:1440};return parseInt(r[1])*i[r[2].toLowerCase()]<=t.value*i[t.unit]})(b,{value:w.value,unit:w.unit});const x=r.ignoreProjectByCurrencies,P=x&&j.currency&&x.includes(j.currency.toUpperCase());if(P&&l.logger.log(`Project is ignored due to currency: ${j.currency}`),f>=r.skillMatchPercent&&y&&S&&!P){const r=i.getAttribute("href")||"",s=i.querySelector(e.search.results.title),n=i.querySelector(e.search.results.description),l=i.querySelector(e.search.results.timeLeft);o.push({id:r.split("/").pop()||"",title:s?.textContent?.trim()||"",description:n?.textContent?.trim()||"",budget:{minimum:j.minimum,maximum:j.maximum},currency:j.currency,type:j.type,skills:a,skillMatchPercent:f,timeLeft:l?.textContent?.trim()||"",url:r,bidCount:c,clientRating:p,clientReviews:g,matchedKeywords:t.filter((e=>a.some((t=>t.includes(e.toLowerCase())))))})}})),o}),{selectors:this.selectors,keywords:e,settings:r});!1===this.browserSettings.headless&&await t.evaluate((async({selectors:e,keywords:t,settings:r})=>{const i=e=>{if(!e)return{minimum:0,maximum:0,type:"fixed"};const t=e.replace(/<[^>]*>/g,"").trim().toLowerCase(),r=t.match(/(?:(?<symbol>[‚Çπ$‚Ç¨¬£¬•])?\s*(?<min>[0-9,.]+)\s*‚Äì\s*(?<max>[0-9,.]+)\s*(?<code>[A-Z]{3})?)|(?:(?<codeAlt>[A-Z]{3})?\s*(?<minAlt>[0-9,.]+)\s*‚Äì\s*(?<maxAlt>[0-9,.]+))/);let i,o=0,s=0;return r?.groups&&(r.groups.min&&r.groups.max?(o=parseFloat(r.groups.min.replace(/,/g,"")),s=parseFloat(r.groups.max.replace(/,/g,"")),i=r.groups.code||r.groups.symbol):r.groups.minAlt&&r.groups.maxAlt&&(o=parseFloat(r.groups.minAlt.replace(/,/g,"")),s=parseFloat(r.groups.maxAlt.replace(/,/g,"")),i=r.groups.codeAlt)),{minimum:o,maximum:s,currency:i,type:t.includes("per hour")?"hourly":"fixed"}},o=(e,t)=>{const r=e.match(/(\d+)\s+(minutes?|hours?|days?)\s+ago/i);if(!r)return!1;const i={minute:1,minutes:1,hour:60,hours:60,day:1440,days:1440};return parseInt(r[1])*i[r[2].toLowerCase()]<=t.value*i[t.unit]},s=e=>new Promise((t=>setTimeout(t,e))),a=document.querySelectorAll(e.search.results.projectCard);for(const n of Array.from(a)){n.scrollIntoView({behavior:"smooth",block:"center"}),await s(5e3);const a=n.querySelectorAll(e.search.results.skillItem),l=[...new Set(Array.from(a).map((e=>e.textContent?.trim().toLowerCase()||"")))],c=n.querySelector(e.search.results.bidsCount),d=parseInt(c?.textContent?.replace(/\D/g,"")||"0"),u=n.querySelector(e.search.results.clientRating),p=n.querySelector(e.search.results.clientReviews),g=parseFloat(u?.textContent?.trim()||"0"),h=parseInt(p?.textContent?.replace(/\D/g,"")||"0"),m=t.map((e=>e.trim().toLowerCase())),f=l.filter((e=>m.includes(e))),y=r.matchFromProjectSkills?f.length/l.length*100:f.length/m.length*100,b=d<=r.maxBidCount&&g>=r.minClientRating&&h>=r.minClientReviews;let w=n.querySelector(e.search.filters.timePosted)?.textContent?.trim();const v=r.projectPostedTime;let j=n.querySelector(e.search.results.budget)?.textContent?.trim();j=i(j||"");const S=o(w||"",{value:v.value,unit:v.unit}),x=r.ignoreProjectByCurrencies,P=x&&j.currency&&x.includes(j.currency.toUpperCase());a.forEach((e=>{const t=e.textContent?.trim().toLowerCase()||"";f.includes(t)&&(e.style.backgroundColor="#d1e7dd",e.style.color="#0f5132",e.style.borderRadius="4px",e.style.padding="2px 6px",e.style.fontWeight="bold")}));const E=y>=r.skillMatchPercent&&b&&S&&!P;n.setAttribute("style",E?"border: 2px solid #4CAF50; position: relative;":"opacity: 0.8; position: relative;");const C=document.createElement("div"),B=E?"":y<r.skillMatchPercent?`Low skill match (${y.toFixed(1)}%)`:b?S?`Ignored currency (${j.currency})`:"Project too old":"Client metrics not met";C.innerHTML=`\n                                <div style="font-weight: bold; font-size: 13px; margin-bottom: 4px;">\n                                    ${E?"‚úÖ Eligible Project":`‚ùå Excluded: ${B}`}\n                                </div>\n                                <div style="font-size: 12px;">\n                                    üéØ <strong>Match %:</strong> ${y.toFixed(1)}%\n                                    (${f.length} matched / ${r.matchFromProjectSkills?l.length:m.length} total)<br>\n                                    üß© <strong>Project Skills:</strong> ${l.join(", ")}<br>\n                                    üìå <strong>Matched Skills:</strong> ${f.length?f.join(", "):"None"}<br>\n                                    üìä <strong>Rating:</strong> ${g} ‚≠ê &nbsp;&nbsp; <strong>Reviews:</strong> ${h}<br>\n                                    üíµ <strong>Budget:</strong> ${j.currency||""} ${j.minimum}-${j.maximum} (${j.type})\n                                </div>\n                            `,C.setAttribute("style",`\n                                position: absolute;\n                                top: 0;\n                                right: 0;\n                                background: ${E?"#4CAF50":"#f57c00"};\n                                color: white;\n                                padding: 6px 10px;\n                                border-radius: 5px;\n                                z-index: 999;\n                                font-family: Arial, sans-serif;\n                                max-width: 300px;\n                                line-height: 1.4;\n                                box-shadow: 0 0 8px rgba(0,0,0,0.2);\n                            `),n.appendChild(C)}}),{selectors:this.selectors,keywords:e,settings:r});const n=[];for(const e of a)await this.dbService.getProjectByTitle(e.title)||n.push(e);if(i.push(...n),console.info(`Page ${o}: Found ${n.length} matching project(s)`),i.length>=r.projectsPerSearch){i.length=r.projectsPerSearch;break}o++,await(0,d.sleep)(r.pageDelay)}return i.length>0&&l.logger.info(`Search completed: Found ${i.length} matching projects in ${o} pages`,{keywords:e,pagesChecked:o,searchCriteria:{maxBidCount:r.maxBidCount,minClientRating:r.minClientRating,minClientReviews:r.minClientReviews}}),i}catch(e){return e instanceof Error?await l.logger.error("Project search failed 1111",e,t):await l.logger.error("Project search failed 1111","No Standard Error",t),i}}async submitBid(e){try{if(l.logger.log(`inside submitBid function ${JSON.stringify(e)}`),!await this.validateBidRequest(e))return{success:!1,error:"Invalid bid request"};let t=await this.browser.createNewPage();if(!t)return await l.logger.error("Failed to create new page for project details","failed to create page"),{success:!1,error:"Unable to open the project"};const r=e.projectUrl.includes("freelancer.com")?e.projectUrl:`${this.selectors.urls.base}${e.projectUrl}`;await this.browser.goto(r,t);const i=n.settings.freelancer.search;if(await this.browser.isElementExists(t,this.selectors.project.projectAlerts))return await l.logger.log(`Project restricted. Alert selector: ${this.selectors.project.projectAlerts}`),await t.close(),{success:!1,error:"Project is restricted"};l.logger.log(`Just before formfilling. Project URL: ${r}`);const o=await t.evaluate((({selectors:e,bidData:t,settings:r,debugMode:i})=>{const o=(e,t)=>{if(i){const r=document.querySelector(e);r&&(r.style.border,r.style.border=`3px solid ${t}`)}};i&&o(e.project.remainingBids,"#FFFF00");let s=(e=>{i&&o(e,"#FF4444");const t=document.querySelector(e);return t?.textContent?.trim()||""})(e.project.remainingBids);if(s=parseInt(s.match(/\d+/)?.[0]||"0",10),s<=0)return l.logger.info("[SubmitBid] Remaining bids available: "+s),{success:!1,noOfBids:s.toString(),shouldApplyOnNextJobs:!1,isRemainingBids:!0,error:"No remaining bids available"};try{const r=document.querySelector(e.project.bidding.form.amount);if(!r)return{success:!1,error:"Cannot find bid amount input field",noOfBids:s.toString()};i&&o(e.project.bidding.form.amount,"#00FF00"),r.value="",r.focus(),r.value=t.amount.toString(),r.dispatchEvent(new Event("input",{bubbles:!0})),r.dispatchEvent(new Event("change",{bubbles:!0}));const a=document.querySelector(e.project.bidding.form.period);a&&(i&&o(e.project.bidding.form.period,"#00FF00"),a.value="",a.focus(),a.value=t.deliveryTime.toString(),a.dispatchEvent(new Event("input",{bubbles:!0})),a.dispatchEvent(new Event("change",{bubbles:!0})));const n=document.querySelector(e.project.bidding.form.proposal);if(!n)return{success:!1,error:"Cannot find proposal textarea",noOfBids:s.toString()};i&&o(e.project.bidding.form.proposal,"#00FF00"),n.value="",n.focus(),n.value=t.proposal,n.dispatchEvent(new Event("input",{bubbles:!0})),n.dispatchEvent(new Event("change",{bubbles:!0}));const l=document.querySelector(e.project.bidding.form.submit);return l?(i&&o(e.project.bidding.form.submit,"#0000FF"),l.disabled?{success:!1,error:"Submit button is disabled. Form validation may have failed.",noOfBids:s.toString()}:{pendingSubmission:!0,buttonClicked:!0,noOfBids:s.toString()}):{success:!1,error:"Cannot find submit button",noOfBids:s.toString()}}catch(e){return{success:!1,error:`Error filling form: ${e}`,noOfBids:s.toString()}}}),{selectors:this.selectors,bidData:e,settings:i,debugMode:!1===this.browserSettings.headless});if(o.buttonClicked){l.logger.log("Form filled successfully, submitting bid...");const r=await t.$(this.selectors.project.bidding.form.submit);if(r){await r.click();try{await Promise.race([t.waitForSelector(".success-message",{timeout:1e4}),t.waitForSelector(".error-message",{timeout:1e4}),t.waitForSelector(".form-error",{timeout:1e4}),t.waitForSelector(".validation-message",{timeout:1e4})]);const r=await this.browser.isElementExists(t,".success-message"),i=await this.browser.isElementExists(t,".error-message"),s=await this.browser.isElementExists(t,".form-error"),a=await this.browser.isElementExists(t,".validation-message");if(r)return l.logger.log("Bid submitted successfully"),await t.close(),{success:!0,bidInfo:{remainingBids:(parseInt(o.noOfBids)-1).toString(),projectId:e.projectId}};if(i||s||a){let r="";return i?r=await t.$eval(".error-message",(e=>e.textContent?.trim()||"Unknown error")):s?r=await t.$eval(".form-error",(e=>e.textContent?.trim()||"Form validation error")):a&&(r=await t.$eval(".validation-message",(e=>e.textContent?.trim()||"Validation error"))),l.logger.log(`Bid submission failed: ${r}`),await t.close(),{success:!1,error:r,bidInfo:{remainingBids:o.noOfBids,projectId:e.projectId}}}}catch(r){const i=t.url();return i.includes("/project/success")||i.includes("/dashboard")?(l.logger.log("Bid likely submitted successfully (redirect detected)"),await t.close(),{success:!0,bidInfo:{remainingBids:(parseInt(o.noOfBids)-1).toString(),projectId:e.projectId}}):(!1===this.browserSettings.headless&&await t.screenshot({path:`bid-timeout-${Date.now()}.png`}),l.logger.log("Bid submission timed out waiting for confirmation"),await t.close(),{success:!1,error:"Submission timed out without confirmation",bidInfo:{remainingBids:o.noOfBids,projectId:e.projectId}})}}}return await t.close(),{success:!1,error:o.error||"Unknown error during bid submission",bidInfo:{remainingBids:o.noOfBids||"0",projectId:e.projectId}}}catch(e){return e instanceof Error?await l.logger.error("submitBid",e):await l.logger.error("submitBid","No Standard Error"),{success:!1,error:String(e)}}}async getProjectDetails(e,t){l.logger.log("inside getProjectDetails fun");let r=null;try{if(r=await this.browser.createNewPage(),!r)return await l.logger.error("Failed to create new page for project details","failed to create page"),null;const i=`${this.selectors.urls.base}${e}`;await this.browser.goto(i,r);const s=n.settings.freelancer.search;if(await this.browser.isElementExists(r,this.selectors.project.projectAlerts))return!1===this.browserSettings.headless&&await r.evaluate((e=>{const t=document.querySelector(e);t&&(t.style.border="3px solid #FF0000")}),this.selectors.project.projectAlerts),console.log(`[selectors.project.projectAlerts]: ${this.selectors.project.projectAlerts}`),await r.close(),null;const a=await r.evaluate((({selectors:e,keywords:t,settings:r,browserSettings:i})=>{const o=(e,t)=>{if(!1===i.headless){const r=document.querySelector(e);r&&(r.style.border,r.style.border=`3px solid ${t}`)}},s=e=>{!1===i.headless&&o(e,"#FF4444");const t=document.querySelector(e);return t?.textContent?.trim()||""};!1===i.headless&&o(e.project.remainingBids,"#FFFF00");let a=s(e.project.remainingBids);if(a=parseInt(a.match(/\d+/)?.[0]||"0",10),a<=0)return l.logger.info("[Get Project Details] Remaining bids available: "+a),{noOfBids:a.toString(),shouldApplyOnNextJobs:!1,isRemainingBids:!0};!1===i.headless&&(o(e.project.header.projectInfo.title,"#4444FF"),o(e.project.header.projectInfo.status,"#4444FF"));const n=s(e.project.header.projectInfo.title),c=s(e.project.header.projectInfo.status);!1===i.headless&&(o(e.project.header.summary.bidCount,"#44FF44"),o(e.project.header.summary.averageBidRate,"#44FF44"));const d=parseInt(s(e.project.header.summary.bidCount))||0,u=s(e.project.header.summary.averageBidRate);!1===i.headless&&(o(e.project.content.projectDetails.budget,"#FF44FF"),o(e.project.content.projectDetails.timeLeft,"#FF44FF"),o(e.project.content.projectDetails.description,"#FF44FF"),o(e.project.content.projectDetails.projectId,"#FF44FF"));let p=s(e.project.content.projectDetails.budget);p=(e=>{if(!e)return{minimum:0,maximum:0,type:"fixed"};const t=e.replace(/<[^>]*>/g,"").trim().toLowerCase(),r=t.match(/(?:(?<symbol>[‚Çπ$‚Ç¨¬£¬•])?\s*(?<min>[0-9,.]+)\s*‚Äì\s*(?<max>[0-9,.]+)\s*(?<code>[A-Z]{3})?)|(?:(?<codeAlt>[A-Z]{3})?\s*(?<minAlt>[0-9,.]+)\s*‚Äì\s*(?<maxAlt>[0-9,.]+))/);let i,o=0,s=0;return r?.groups&&(r.groups.min&&r.groups.max?(o=parseFloat(r.groups.min.replace(/,/g,"")),s=parseFloat(r.groups.max.replace(/,/g,"")),i=r.groups.code||r.groups.symbol):r.groups.minAlt&&r.groups.maxAlt&&(o=parseFloat(r.groups.minAlt.replace(/,/g,"")),s=parseFloat(r.groups.maxAlt.replace(/,/g,"")),i=r.groups.codeAlt)),{minimum:o,maximum:s,currency:i,type:t.includes("per hour")?"hourly":"fixed"}})(p||"");const g=s(e.project.content.projectDetails.timeLeft),h=s(e.project.content.projectDetails.description),m=s(e.project.content.projectDetails.projectId).replace("Project ID:","").trim();!1===i.headless&&o(e.project.content.projectDetails.skills.container,"#FFA500");const f=document.querySelector(e.project.content.projectDetails.skills.container),y=Array.from(f?.querySelectorAll(e.project.content.projectDetails.skills.item)||[]).map((e=>(!1===i.headless&&(e.style.border="2px solid #FFA500",setTimeout((()=>{e.style.border=""}),1e3)),e.textContent?.trim().toLowerCase()))).filter((e=>e)),b=t.filter((e=>y.some((t=>t.includes(e.toLowerCase()))))),w=r.matchFromProjectSkills?b.length/y.length*100:b.length/t.length*100;!1===i.headless&&o(e.project.content.clientDetails.verifications.list,"#008080");const v=document.querySelector(e.project.content.clientDetails.verifications.list),j=Array.from(v?.querySelectorAll(e.project.content.clientDetails.verifications.item)||[]).map((e=>(!1===i.headless&&(e.style.border="2px solid #008080",setTimeout((()=>{e.style.border=""}),1e3)),e.textContent?.trim()))).filter((e=>e));return{projectId:m,title:n,status:c,bidCount:d,averageBidRate:u,type:p.type,budget:{minimum:p.minimum,maximum:p.maximum},currency:p.currency,timeLeft:g,description:h,skills:y,clientVerifications:j,fullDescriptionFetched:!0,isRemainingBids:!1,matchPercentage:w}}),{selectors:this.selectors,keywords:t,settings:s,browserSettings:this.browserSettings});if(!a)return l.logger.info("Project details not fetched"),await r.close(),null;if(a.projectId&&(l.logger.info(`Project details fetched: ${a.title} - ${a.projectId}`),await this.dbService.getProjectById(a.projectId)))return!1===this.browserSettings.headless&&await(0,o.showProjectModal)(r,a.projectId,{title:"Project Already Exists",message:["This project is already in the database."],autoCloseTime:5e3,showDuration:3e3}),l.logger.info(`Project already exists in database: ${a.projectId}`),await r.close(),null;if(await(0,d.sleep)(s.pageDelay),a.isRemainingBids)return await r.close(),{noOfBids:a.noOfBids,shouldApplyOnNextJobs:a.shouldApplyOnNextJobs};{const e=await this.analyzeDescriptionRedFlags(a.description||""),t=e.flags,o=e.hasRedFlags;if(o&&t.some((e=>"high"===e.severity)))return await r.close(),l.logger.info(`Skipping project ${a.projectId}: ${a.title} due to high severity red flags. Details: ${e}`),null;const n={id:a?.projectId,title:a?.title,description:a?.description,status:a?.status,type:a?.type||("both"!==s.projectType?s.projectType:"fixed"),budget:{minimum:a?.budget?.minimum||0,maximum:a?.budget?.maximum||0},skills:a.skills,currency:a.budget?a.currency:"",postedDate:new Date,bidCount:a.bidCount,averageBid:parseFloat(a.averageBidRate||"0"),employer:{id:"",username:"",rating:void 0},isProposalSubmitted:!1,url:i,skillMatchPercent:a.matchPercentage};return await this.dbService.saveProject(n,{hasRedFlags:o,flags:t}),await r.close(),n}}catch(e){return e instanceof Error?await l.logger.error("Failed to get project details",e):await l.logger.error("Failed to get project details","No Standard Error"),null}}async analyzeDescriptionRedFlags(e){const t=[],r=e.toLowerCase();return Object.entries({urgency:{patterns:["urgent","asap","immediate","emergency","quick","fastest","rush"],severity:"medium",reason:"Shows excessive urgency"},unprofessional:{patterns:["bro","dude","hey guys","anyone","somebody"],severity:"low",reason:"Unprofessional tone"},payment:{patterns:["pay later","pay after","pay when","future projects","long term"],severity:"high",reason:"Questionable payment terms"},scope:{patterns:["simple","easy","quick job","basic","just need"],severity:"medium",reason:"Potential scope underestimation"},freeWork:{patterns:["test task","sample work","prove your","show me","demo first"],severity:"high",reason:"May request unpaid work"}}).forEach((([e,i])=>{i.patterns.some((e=>r.includes(e)))&&t.push({severity:i.severity,reason:i.reason})})),{hasRedFlags:t.length>0,flags:t}}async validateBidRequest(e){return(0,u.validateBidRequest)(e)}async isLoggedIn(){try{return await this.browser.waitForSelector(this.selectors.login.loggedInIndicator)}catch{return!1}}async logout(){}}t.FreelancerService=p},943:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.freelancerSelectors=void 0;const r="app-project-view-logged-in app-project-view-header fl-container:nth-child(1) fl-grid > fl-col:nth-child(1)",i="app-project-view-logged-in app-project-view-header fl-container fl-grid > fl-col:nth-child(2) app-project-summary > div",o="app-project-view-logged-in > app-project-view-details > fl-page-layout > fl-container > fl-page-layout-single > fl-grid",s="fl-col:nth-child(1) > fl-card",a="fl-col:nth-child(2) > app-employer-info > fl-card > div > div",n=`${o} app-bid-form`,l="https://www.freelancer.com",c='fl-sticky-footer-wrapper[fltrackingsection="SearchProjectsFilters"]';t.freelancerSelectors={urls:{base:`${l}`,login:`${l}/login`,messages:`${l}/messages`,search:`${l}/search/projects`,myProjects:`${l}/my-projects`},login:{usernameInput:"#emailOrUsernameInput",passwordInput:"#passwordInput",submitButton:"app-login-signup-button",loggedInIndicator:"app-user-card",errorMessage:".form-error"},search:{searchInput:'app-search-header[fltrackingsection="SearchHeader"] input[type="search"]',searchButton:'app-search-header[fltrackingsection="SearchHeader"] div.SavedSearchButton fl-button.SavedSearchButton-filters[fltrackinglabel="OpenSaveFiltersCalloutButton"] > button',filters:{fixedBudgetMin:`${c} .BudgetFilter fl-input[fltrackinglabel="FixedPriceMinFilter"] .InputContainer input#min-fixed-price-input[type="number"]`,fixedBudgetMax:`${c} .BudgetFilter fl-input[fltrackinglabel="FixedPriceMaxFilter"] .InputContainer input#max-fixed-price-input[type="number"]`,hourlyBudgetMin:`${c} .BudgetFilter fl-input[fltrackinglabel="HourlyRateMinFilter"] .InputContainer input#min-hourly-rate-input[type="number"]`,hourlyBudgetMax:`${c} .BudgetFilter fl-input[fltrackinglabel="HourlyRateMaxFilter"] .InputContainer input#max-hourly-rate-input[type="number"]`,skillsInput:".SkillsInput input",projectType:"#filter-project-type",timePosted:".UrgentProject",projectTypeHourly:`${c} app-search-checklist[trackingreferencetype="project_type"] div:first-child div.CheckboxContainer label.CheckboxLabel`,projectTypeFixed:`${c} app-search-checklist[trackingreferencetype="project_type"] div:last-child div.CheckboxContainer label.CheckboxLabel`},results:{container:"app-search-results app-search-results-projects",projectCard:'app-search-results > fl-card .CardBody > app-search-results-projects [fltrackinglabel="RedirectToPVP"][fltrackingreferencetype="project_id"][fltrackingsection="SearchProjectsResultCard"]',title:'app-search-results > fl-card .CardBody > app-search-results-projects [fltrackinglabel="RedirectToPVP"][fltrackingreferencetype="project_id"] h2',description:'app-search-results > fl-card > div > div.CardBody > app-search-results-projects > div > a > fl-project-contest-card > fl-text [role="paragraph"]',budget:"app-search-results > fl-card > div > div.CardBody > app-search-results-projects > div > a > fl-project-contest-card > div.Container > div.Header > div.BudgetUpgradeWrapper fl-text div",skillsWrapper:"app-search-results > fl-card .CardBody > app-search-results-projects .SkillsWrapper",skillItem:"app-search-results > fl-card .CardBody > app-search-results-projects .SkillsWrapper fl-tag div fl-text span div",bidsCount:"app-search-results > fl-card > div > div.CardBody > app-search-results-projects > div > a > fl-project-contest-card > div.Container > div.FlexWrapper > div.ng-star-inserted > fl-text > div > div",timeLeft:".TimeLeft",clientRating:"app-search-results > fl-card > div > div.CardBody > app-search-results-projects > div > a > fl-project-contest-card > div.Footer > div > div:nth-child(1) > div > fl-rating > div > div.ValueBlock.ng-star-inserted",clientReviews:"app-search-results > fl-card > div > div.CardBody > app-search-results-projects > div > a > fl-project-contest-card > div.Footer > div > div:nth-child(1) > fl-review-count > fl-text > div",newProjectsButton:'fl-floating-action[fltrackinglabel="NewProjectsNotification"] > .FloatingAction.FloatingAction--withIcon',newProjectsText:'fl-floating-action[text="view new projects"]'},pagination:{container:".Pagination",next:".Pagination-next",prev:".Pagination-prev",current:".Pagination-current"},noResults:".EmptyState"},project:{remainingBids:`${o} > fl-col:nth-child(2) > fl-card > div > div > app-insights-bid-summary-widget > div > div.ReplenishmentData.ng-star-inserted > div > fl-text > span > fl-text > span`,header:{projectInfo:{container:r,title:`${r} app-project-title > fl-heading fl-text > span`,status:`${r} fl-text > div > fl-project-status > div > fl-tag > div > div > fl-text > span > div`},summary:{container:i,bidCount:`${i} div:nth-child(1) fl-text:nth-child(2) > div`,averageBidRate:`${i} div:nth-child(2) fl-text:nth-child(2) > div`}},content:{container:o,projectDetails:{container:`${o} ${s}`,budget:`${o} ${s} div > div > fl-heading > h2 > div > div.CardRightWrapper > app-project-details-budget > div > fl-text:nth-child(1) > div`,timeLeft:`${o} ${s} div > div > fl-heading > h2 > div > div.CardRightWrapper > app-project-details-budget > div > fl-text.ng-star-inserted > span > fl-relative-time.HideMobile.ng-star-inserted > fl-text > span`,description:`${o} ${s} div > div > app-project-details-description > div > fl-interactive-text > fl-text > span`,skills:{container:`${o} ${s} app-project-details-skills > div`,item:"fl-tag > fl-link > a > div > fl-text > span > div"},projectId:`${o} ${s} div > div > div.ProjectDetailsFooter.ng-star-inserted > div.ProjectDetailsFooter-left > fl-text > div`,additionalDetails:{attachements:{heading:`${o} ${s} app-project-additional-details fl-heading h6`,file:`${o} ${s} app-project-additional-details fl-text`}}},clientDetails:{container:`${o} ${a}`,verifications:{list:`${o} ${a} app-user-verifications > fl-list`,item:`${o} ${a} fl-list-item > div > div > div.BitsListItemHeader > div.BitsListItemContent.ng-star-inserted > div > fl-text > div`}}},projectAlerts:`${o} app-project-banner fl-banner-alert`,bidding:{bidButton:'[data-qtsb-text="Place Bid"]',form:{amount:`${n} > fl-card > div > div.CardBody > div:nth-child(3) > div:nth-child(1) > div.BidFormInputGroup.ng-star-inserted > div:nth-child(1) > fl-input > div > div > div #bidAmountInput`,period:`${n} > fl-card > div > div.CardBody > div:nth-child(3) > div:nth-child(1) > div.BidFormInputGroup.ng-star-inserted > div:nth-child(2) > fl-input > div > div > div #periodInput`,proposal:`${n} fl-textarea textarea`,submit:`${n} > fl-card > div > div.CardBody > div.BidFormBtn.ng-star-inserted > fl-button.BidFormBtn[fltrackinglabel="PlaceBidButton"]`,cancel:'button[type="button"]'},milestones:{toggle:".Milestones-toggle",add:".Milestones-add",description:'input[name="milestone-description"]',amount:'input[name="milestone-amount"]'}}},navigation:{profileMenu:".UserMenu",logoutButton:'[data-qtsb-text="Log Out"]',loadingIndicator:".LoadingIndicator",errorModal:".ErrorModal",closeModal:".Modal-close"},waitTimes:{short:2e3,medium:5e3,long:1e4,pageLoad:6e4},patterns:{budget:/\$(\d+)-(\d+)/,timeLeft:/(\d+)\s*(days|hours|minutes)/,bidCount:/(\d+)\s*bids?/,rating:/(\d+(\.\d+)?)/}}},958:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProposalController=void 0;const i=r(628);t.ProposalController=class{constructor(e){this.proposalService=e}async generateProposal(e){i.logger.info("proposal.controller: Generating proposal...");try{return await this.proposalService.generateProposal(e)}catch(e){return e instanceof Error?i.logger.error("Proposal generation error:",e):i.logger.error("Proposal generation error:","No Standard Error"),null}}async regenerateProposal(e,t){try{const r={...e,description:`${e.description}\n\nAdditional requirements/feedback: ${t}`};return this.proposalService.generateProposal(r)}catch(e){return e instanceof Error?i.logger.error("Proposal regeneration error:",e):i.logger.error("Proposal regeneration error:","No Standard Error"),null}}}}},t={};function r(i){var o=t[i];if(void 0!==o)return o.exports;var s=t[i]={exports:{}};return e[i].call(s.exports,s,s.exports,r),s.exports}(()=>{r(818).config();const e=r(602),t=r(859),i=r(628),o=e.settings.freelancer.search_keywords,s=process.env.SEARCH_KEYWORDS?.split(",")||["PHP","eCommerce","Mobile App Developement","Shopify","Wix","wordpress","php","ecommerce"];(async function(){const e=new t.App;process.on("SIGINT",(async()=>{i.logger.info("Shutting down..."),await e.stop(),process.exit(0)}));try{i.logger.info("Just getting started"),await e.start(o,s)}catch(e){e instanceof Error&&i.logger.error("Application failed:",e),i.logger.error("Application failed:","No Standard Error"),process.exit(1)}})().catch((e=>{i.logger.error("Unhandled error:",e),process.exit(1)}))})()})();